meta:
  name: Timeline Composer
  description: Compose assets into a ReMotion timeline.
  id: TimelineComposer
  version: 0.1.0
  author: Tutopanda
  license: MIT

inputs:
  - name: ImageSegments
    description: Collected image assets grouped per segment.
    type: collection
    itemType: image
    dimensions: segment.image
    fanIn: true
  - name: AudioSegments
    description: Master audio clips grouped per segment.
    type: collection
    itemType: audio
    dimensions: segment
    fanIn: true
  - name: Duration
    description: Total duration of the movie in seconds.
    type: int
    required: true

artifacts:
  - name: Timeline
    description: OrderedTimeline JSON manifest.
    type: json

connections:
  - from: ImageSegments
    to: TimelineProducer
  - from: AudioSegments
    to: TimelineProducer
  - from: Duration
    to: TimelineProducer
  - from: TimelineProducer
    to: Timeline

producers:
  - name: TimelineProducer
    provider: Tutopanda
    model: OrderedTimeline
    config:
      rootFolder: ~/tutopanda
      source: local
      numTracks: 2
      masterTrack:
        kind: Audio
      clips:
        - kind: Image
          inputs: ImageSegments[segment]
          effect: KennBurns
        - kind: Audio
          inputs: AudioSegments
